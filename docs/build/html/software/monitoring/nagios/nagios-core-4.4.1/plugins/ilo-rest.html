

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iLO AgentLess Management - Nagios Plugin &mdash; apolo-docs 0.1 documentation</title>
      <link rel="stylesheet" href="../../../../../_static/css/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/sidebar.css" type="text/css" />

  
      <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="PNP4Nagios" href="pnp4nagios.html" />
    <link rel="prev" title="Dell OpenManage - Nagios Plugin" href="dell-openmanage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

  
    <a href="../../../../../index.html" class="icon icon-home"> apolo-docs
  

  
    </a>

    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../gettingstarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../supercomputers/index.html">Supercomputers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Software</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../virtualization/index.html">Virtualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../programminglanguages/index.html">Programming Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../applications/index.html">Scientific Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../managementsoftware/index.html">Management Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../provisioning/index.html">Provisioning</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">Monitoring</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../architecture/index.html">Monitoring Architecture</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">Nagios</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">Nagios Core - 4.4.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../sensu/index.html">Sensu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../elk/index.html">ELK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../grafana/index.html">Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apolomonitoring/index.html">Apolo Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sensu_go/index.html">Sensu Go</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../operatingsystems/index.html">Operating Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../scientific_libraries/index.html">Scientific Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../accelerators/index.html">Accelerators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how-to-acknowledge.html">How to Acknowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../report-a-bug.html">Report a Bug</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">apolo-docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Software</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Monitoring</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Nagios</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Nagios Core - 4.4.1</a></li>
      <li class="breadcrumb-item active">iLO AgentLess Management - Nagios Plugin</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/software/monitoring/nagios/nagios-core-4.4.1/plugins/ilo-rest.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ilo-agentless-management-nagios-plugin">
<span id="ilo-rest-plugin-index"></span><h1><a class="toc-backref" href="#id3" role="doc-backlink">iLO AgentLess Management - Nagios Plugin</a><a class="headerlink" href="#ilo-agentless-management-nagios-plugin" title="Link to this heading"></a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ilo-agentless-management-nagios-plugin" id="id3">iLO AgentLess Management - Nagios Plugin</a></p>
<ul>
<li><p><a class="reference internal" href="#basic-information" id="id4">Basic information</a></p></li>
<li><p><a class="reference internal" href="#tested-on-requirements" id="id5"><strong>Tested on (Requirements)</strong></a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id6">Dependencies</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id7">Installation</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id8">Configuration</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#defining-hosts-commands-and-services" id="id10">Defining Hosts, commands and services</a></p></li>
<li><p><a class="reference internal" href="#ilo-credentials" id="id11">iLO Credentials</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#troubleshooting" id="id12">Troubleshooting</a></p>
<ul>
<li><p><a class="reference internal" href="#aclocal-1-14-is-missing" id="id13">aclocal-1.14 is missing</a></p></li>
<li><p><a class="reference internal" href="#installation-in-centos-7" id="id14">Installation in CentOS 7</a></p></li>
<li><p><a class="reference internal" href="#network-service-not-implemented" id="id15">Network Service not Implemented</a></p></li>
<li><p><a class="reference internal" href="#ilo-memory-service-in-unknown-state" id="id16">iLO Memory service in UNKNOWN state</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#references" id="id17">References</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="basic-information">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Basic information</a><a class="headerlink" href="#basic-information" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Official Website:</strong> <a class="reference external" href="https://exchange.nagios.org/directory/Plugins/Network-and-Systems-Management/Others/A-Nagios-Plug-2Din-for-iLO-Agentless-Management-(HPE-ProLiant-Server)/details">https://exchange.nagios.org/directory/Plugins/Network-and-Systems-Management/Others/A-Nagios-Plug-2Din-for-iLO-Agentless-Management-(HPE-ProLiant-Server)/details</a></p></li>
<li><p><strong>License:</strong> GPL</p></li>
<li><p><strong>Version:</strong> 1.5 - Nagios HPE iLO RESTful Plugin</p></li>
</ul>
</section>
<section id="tested-on-requirements">
<h2><a class="toc-backref" href="#id5" role="doc-backlink"><strong>Tested on (Requirements)</strong></a><a class="headerlink" href="#tested-on-requirements" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>HPE ProLiant Server</p></li>
<li><p><strong>Nagios Core:</strong> Version <span class="math notranslate nohighlight">\(\boldsymbol{\ge}\)</span> 3.5.0</p></li>
</ul>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Dependencies</a><a class="headerlink" href="#dependencies" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>curl</p></li>
<li><p>libcurl</p></li>
<li><p>libcurl-devel</p></li>
<li><p>nmap</p></li>
<li><p>libtdb-devel</p></li>
<li><p>python</p></li>
<li><p>net-snmp-utils <em>(Also required by Nagios Core)</em></p></li>
<li><p>glibc-devel <em>(Also required by Nagios Core)</em></p></li>
</ul>
</section>
<section id="installation">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Installation</a><a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>This taskfile is executed only if there aren’t any plugins in the directory <code class="code highlight bash docutils literal highlight-bash">/usr/local/nagios/libexec</code> that
matches the regular expression <code class="code highlight bash docutils literal highlight-bash">*hpeilo*</code>. This state is registered in the taskfile
<code class="code highlight bash docutils literal highlight-bash">nagios-plugins-installed.yml</code>, with the module <strong>find</strong>.</p>
<p>For more information about these registers read the section <a class="reference internal" href="../installation.html#nagios-plugins-installed-yml"><span class="std std-ref">Installing Nagios Plugins</span></a>.</p>
<p>The installation process <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> consists of downloading the plugin from the original repository, then it is necessary to
regenerate the configure files if the aclocal version is not 1.14. More information in the
section <a class="reference internal" href="#aclocal-missing"><span class="std std-ref">aclocal-1.14 is missing</span></a>. Finally, the configure, make and make install are executed.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create Temp Dir</span>
<span class="w">  </span><span class="nt">file</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">directory</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Download iLO REST Plugin</span>
<span class="w">  </span><span class="nt">git</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ilo_plugin_url</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">clone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Reconfigure files for the aclocal in the system</span>
<span class="w">  </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;autoreconf</span><span class="nv"> </span><span class="s">-vfi&quot;</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">chdir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Exec configure</span>
<span class="w">  </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./configure&quot;</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">chdir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Make</span>
<span class="w">  </span><span class="nt">make</span><span class="p">:</span>
<span class="w">    </span><span class="nt">chdir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Make install</span>
<span class="w">  </span><span class="nt">make</span><span class="p">:</span>
<span class="w">    </span><span class="nt">chdir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">temp_dir</span><span class="nv"> </span><span class="s">}}/nagios-ilo-plugin&quot;</span>
<span class="w">    </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">install</span>
</pre></div>
</div>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Configuration</a><a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>Synchronizes the iLO credential files and the iLO plugin configuration with the version present in the repo and
configures the permissions over Nagios credential file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Assures the existance of the ilo plugin config directory.</span>
<span class="w">  </span><span class="nt">file</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/usr/local/nagios/etc/ilo&quot;</span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">directory</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Assures the existance of the nagios credentials directory.</span>
<span class="w">  </span><span class="nt">file</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/etc/nagios&quot;</span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">directory</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Synchronize configuration</span>
<span class="w">  </span><span class="nt">copy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/{{</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">with_items</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">usr/local/nagios/etc/ilo/ilo.cfg</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etc/nagios/.nagios_restful_credential.tdb</span>
<span class="w">  </span><span class="nt">notify</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nagios_restart</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Correct permissions of nagios-credentials file</span>
<span class="w">  </span><span class="nt">file</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/nagios/.nagios_restful_credential.tdb</span>
<span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">0600</span>
<span class="w">    </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nagios</span>
<span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nagios</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It’s important to configure nagios as the owner of the nagios credential file as is described in
this configuration taskfile.</p>
</div>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<section id="defining-hosts-commands-and-services">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Defining Hosts, commands and services</a><a class="headerlink" href="#defining-hosts-commands-and-services" title="Link to this heading"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It’s necessary to read the section <a class="reference internal" href="#nagios-centos-7"><span class="std std-ref">Installation in CentOS 7</span></a> before proceeding to configure.</p>
</div>
<p>For starting the configuration of the iLO plugin, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/local/nagios/libexec/hpeilo_nagios_config
</pre></div>
</div>
<p>Example of simple configuration using the script:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Do you wish to enable passive HPE iLO host discovery (y/n) (Blank is y):
Do you wish to enable active discovery (y/n) (Blank is y):
Do you wish to configure host groups (y/n) (Blank is y):
Enter host group name: ilo-4_example_group
Enter host group &quot;ilo-4_example_group&quot; IP range: 192.168.1.10
Enter host group &quot;ilo-4_example_group&quot; SNMP read-only community string (Blank default value  public):
Enter host group &quot;ilo-4_example_group&quot; SNMP Trap community string (Blank default value  public):
Do you wish to add one more host group (y/n) (Blank is n):
Enter host group check interval time in minutes (Blank default value - 5 minutes ): 1
 default is exists. Do you wish to update or not? (y/n): n
Do you wish to configure iLO credential for single server if there&#39;re different with
the default iLO credential (y/n) (Blank is n):

**************Configured Data****************
PASSIVE_DISCOVERY 1
ACTIVE_DISCOVERY  1
 HOSTGROUP: ilo-4_example_group,192.168.1.10,public,public
CHECK_INTERVAL 1
*********************************************

Do you wish to write above configured data to host-group configuration file. (y/n) (Blank is y):
HPE iLO host-group configuration file saved at /usr/local/nagios/libexec/hpeilo_nagios_config.cfg.
HPE iLO Hosts/Services discovered configuration file is existing:/usr/local/nagios/etc/ilo/ilo.cfg
Do you wish to replace it?(y/n) (Blank is y):
</pre></div>
</div>
<p>With regard to the current question: If you answer NO, then the script will
save a backup in the folder <code class="code highlight bash docutils literal highlight-bash">/usr/local/nagios/etc/ilo/.backup/</code>, and
will override the configuration file.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Do you wish to run configuration file to complete the process (y/n) (Blank is y):
Running configuration  file ....
Reading host-group configuration file : /usr/local/nagios/libexec/hpeilo_nagios_config.cfg
Discovery using configuration file
passive configuration enabled
[Failed]
Restart snmptrapd
Redirecting to /bin/systemctl restart snmptrapd.service
[Done]
active configuration enabled
Scan the network range: 192.168.1.10-192.168.1.10   with the total hosts &#39;1&#39;
env: /etc/init.d/nagios: Permiso denegado
Progress: 100% (scanned 1 of 1 hosts)
Total hosts &#39;1&#39; added of &#39;1&#39; hosts
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In version 1.5 of this plugin, there is an unimplemented service, so it’s necessary to
do the procedure explained in the section <a class="reference internal" href="#ilo-network-not-implemented"><span class="std std-ref">Network Service not Implemented</span></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you created the temporal file /etc/init.d/nagios, it’s important to delete it after generating
the configuration of iLO plugin.</p>
</div>
</section>
<section id="ilo-credentials">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">iLO Credentials</a><a class="headerlink" href="#ilo-credentials" title="Link to this heading"></a></h3>
<p>The iLO credentials used by the plugin are cyphered and stored in the file
<code class="code highlight bash docutils literal highlight-bash">/etc/nagios/.nagios_restful_credential.tdb</code> and can be modified with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/local/nagios/libexec/credit_save<span class="w"> </span>-H<span class="w"> </span>&lt;hostname&gt;<span class="w"> </span><span class="o">[</span>-V<span class="o">]</span><span class="w"> </span><span class="o">[</span>-h<span class="o">]</span>
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Params</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-H HOST</p></td>
<td><p>Hostname, Host IP or default if you want to stablish default credentials</p></td>
</tr>
<tr class="row-odd"><td><p>-V</p></td>
<td><p>Version number</p></td>
</tr>
<tr class="row-even"><td><p>-h</p></td>
<td><p>Prints this help information</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="troubleshooting">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Troubleshooting</a><a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="aclocal-1-14-is-missing">
<span id="aclocal-missing"></span><h3><a class="toc-backref" href="#id13" role="doc-backlink">aclocal-1.14 is missing</a><a class="headerlink" href="#aclocal-1-14-is-missing" title="Link to this heading"></a></h3>
<p>If your version of aclocal is different than 1.14 it is necessary to regenerate the <strong>configure</strong> files in order to
compile correctly the plugin.</p>
<p>This is possible executing the command <code class="code highlight bash docutils literal highlight-bash">autoreconf<span class="w"> </span>-vfi</code> in the source directory. If this is not executed,
when <code class="code highlight bash docutils literal highlight-bash">./configure</code> is executed the following error message will appear.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>WARNING:<span class="w"> </span><span class="s1">&#39;aclocal-1.14&#39;</span><span class="w"> </span>is<span class="w"> </span>missing<span class="w"> </span>on<span class="w"> </span>your<span class="w"> </span>system.
You<span class="w"> </span>should<span class="w"> </span>only<span class="w"> </span>need<span class="w"> </span>it<span class="w"> </span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>modified<span class="w"> </span><span class="s1">&#39;acinclude.m4&#39;</span><span class="w"> </span>or
<span class="s1">&#39;configure.ac&#39;</span><span class="w"> </span>or<span class="w"> </span>m4<span class="w"> </span>files<span class="w"> </span>included<span class="w"> </span>by<span class="w"> </span><span class="s1">&#39;configure.ac&#39;</span>.
The<span class="w"> </span><span class="s1">&#39;aclocal&#39;</span><span class="w"> </span>program<span class="w"> </span>is<span class="w"> </span>part<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>GNU<span class="w"> </span>Automake<span class="w"> </span>package:
&lt;http://www.gnu.org/software/automake&gt;
It<span class="w"> </span>also<span class="w"> </span>requires<span class="w"> </span>GNU<span class="w"> </span>Autoconf,<span class="w"> </span>GNU<span class="w"> </span>m4<span class="w"> </span>and<span class="w"> </span>Perl<span class="w"> </span><span class="k">in</span><span class="w"> </span>order<span class="w"> </span>to<span class="w"> </span>run:
&lt;http://www.gnu.org/software/autoconf&gt;
&lt;http://www.gnu.org/software/m4/&gt;
&lt;http://www.perl.org/&gt;
</pre></div>
</div>
</section>
<section id="installation-in-centos-7">
<span id="nagios-centos-7"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">Installation in CentOS 7</a><a class="headerlink" href="#installation-in-centos-7" title="Link to this heading"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Although the official page provides a compatible version with CentOS 7, the scripts for generating
the configuration files are written for a CentOS version that still uses init, searching information
in the files that match the following regular expression: <code class="code highlight bash docutils literal highlight-bash">/etc/init.d/nagios*</code></p>
</div>
<p>The error will show an error output during the execution of the configuration scripts as the showed below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Do<span class="w"> </span>you<span class="w"> </span>wish<span class="w"> </span>to<span class="w"> </span>write<span class="w"> </span>above<span class="w"> </span>configured<span class="w"> </span>data<span class="w"> </span>to<span class="w"> </span>host-group<span class="w"> </span>configuration<span class="w"> </span>file.<span class="w"> </span><span class="o">(</span>y/n<span class="o">)</span><span class="w"> </span><span class="o">(</span>Blank<span class="w"> </span>is<span class="w"> </span>y<span class="o">)</span>:
HPE<span class="w"> </span>iLO<span class="w"> </span>host-group<span class="w"> </span>configuration<span class="w"> </span>file<span class="w"> </span>saved<span class="w"> </span>at<span class="w"> </span>/usr/local/nagios/libexec/hpeilo_nagios_config.cfg
grep:<span class="w"> </span>/etc/init.d/nagios*:<span class="w"> </span>No<span class="w"> </span>existe<span class="w"> </span>el<span class="w"> </span>fichero<span class="w"> </span>o<span class="w"> </span>el<span class="w"> </span>directorio
dirname:<span class="w"> </span>falta<span class="w"> </span>un<span class="w"> </span>operando
Pruebe<span class="w"> </span><span class="s1">&#39;dirname --help&#39;</span><span class="w"> </span>para<span class="w"> </span>más<span class="w"> </span>información.
</pre></div>
</div>
<p>In this installation, CentOS 7 configured Nagios Daemon with systemd specifications, so the file
/etc/init.d/nagios* was not created.</p>
<p>In order not to modify the code of the iLO plugin scripts, the alternative proposed here is to generate
a temporal file <code class="code highlight bash docutils literal highlight-bash">/etc/init.d/nagios</code> during the generation of the configuration files with
the following content:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">NagiosIloCfgFile</span><span class="o">=</span>/usr/local/nagios/etc/nagios.cfg
</pre></div>
</div>
</section>
<section id="network-service-not-implemented">
<span id="ilo-network-not-implemented"></span><h3><a class="toc-backref" href="#id15" role="doc-backlink">Network Service not Implemented</a><a class="headerlink" href="#network-service-not-implemented" title="Link to this heading"></a></h3>
<p>The services provided by this plugin are:</p>
<ol class="arabic simple">
<li><p>System Health</p></li>
<li><p>Fan</p></li>
<li><p>Memory</p></li>
<li><p>Network</p></li>
<li><p>Power Supply</p></li>
<li><p>Processor</p></li>
<li><p>Storage</p></li>
<li><p>Temperature</p></li>
</ol>
<p>Although Network function is not implemented, the scripts written by the developers of the plugin generate configuration
lines for this unimplemented function. So, after generating the configuration files with the iLO plugin script, it is
necessary to remove manually this service from the service definitions generated.</p>
<p>It’s necessary to remove the definitions of the service and the servicegroup.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>define<span class="w"> </span>servicegroup<span class="w"> </span><span class="o">{</span>
<span class="w">  </span>servicegroup_name<span class="w">    </span>Network
<span class="w">  </span>members<span class="w">              </span>server1,<span class="w"> </span>Network,<span class="w"> </span>server2,<span class="w"> </span>Network
<span class="o">}</span>

define<span class="w"> </span>service<span class="w"> </span><span class="o">{</span>
<span class="w">  </span>use<span class="w">                 </span>generic-iLO-service
<span class="w">  </span>hostgroup_name<span class="w">      </span>group-name
<span class="w">  </span>service_description<span class="w"> </span>Network
<span class="w">  </span>check_command<span class="w">       </span>nagios_hpeilo_restful_engine!4
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="ilo-memory-service-in-unknown-state">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">iLO Memory service in UNKNOWN state</a><a class="headerlink" href="#ilo-memory-service-in-unknown-state" title="Link to this heading"></a></h3>
<p>The error message displayed in the <strong>Status information</strong> field in the Nagios <strong>Service Status Details</strong> is
normal when the machine is powered off.</p>
<p>Message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Check<span class="w"> </span>iLO<span class="w"> </span>credit<span class="w"> </span>is<span class="w"> </span>correct<span class="w"> </span>saved.<span class="o">(</span>/usr/local/nagios/libexec/credit_save<span class="w"> </span>-H<span class="w"> </span><span class="m">10</span>.150.4.188<span class="o">)</span>
</pre></div>
</div>
</section>
</section>
<section id="references">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">References</a><a class="headerlink" href="#references" title="Link to this heading"></a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>“User’s Manual Nagios Plug-in for HPE iLO RESTful Extension”, Hewlett Packard Enterprise (HPE). Retrieved December 3, 2018, from <a class="reference external" href="https://goo.gl/knRFPr">https://goo.gl/knRFPr</a>.</p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dell-openmanage.html" class="btn btn-neutral float-left" title="Dell OpenManage - Nagios Plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pnp4nagios.html" class="btn btn-neutral float-right" title="PNP4Nagios" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Creative Commons Attribution-NonCommercial 4.0 International License.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CHARMM c41b2 &mdash; apolo-docs 0.1 documentation</title>
      <link rel="stylesheet" href="../../../../_static/css/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/sidebar.css" type="text/css" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Calculix" href="../../Calculix/index.html" />
    <link rel="prev" title="CHARMM" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

  
    <a href="../../../../index.html" class="icon icon-home"> apolo-docs
  

  
    </a>

    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../gettingstarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../supercomputers/index.html">Supercomputers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Software</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../virtualization/index.html">Virtualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programminglanguages/index.html">Programming Languages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Scientific Applications</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../abyss/index.html">ABySS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ansys/index.html">ANSYS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../arcs/index.html">ARCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../autoDock/index.html">AutoDock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../autoDock_Vina/index.html">autoDock_Vina</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bayescan/index.html">BayeScan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../BEAST2/index.html">BEAST2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../BLAST/index.html">BLAST</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../blat/index.html">BLAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bowtie2/index.html">bowtie2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Bpp/index.html">Bpp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../BWA/index.html">BWA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../CDO/index.html">CDO</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">CHARMM</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">CHARMM c41b2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Calculix/index.html">Calculix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../clustalw/index.html">Clustalw</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../crystal/index.html">crystal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../curl/index.html">Curl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Cufflinks/index.html">Cufflinks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../delft3D/index.html">delft3D</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../DL_POLY_Classic/index.html">DL_POLY_Classic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../edge_pro/index.html">EDGE-pro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../elmer/index.html">elmer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fastQC/index.html">fastQC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../gamess/index.html">gamess</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../garli/index.html">garli</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../gatk4/index.html">GATK4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../gromacs/index.html">GROMACS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../gromacs-ls/index.html">GROMACS-LS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../gurobi/index.html">gurobi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../iqtree/index.html">IQ-TREE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../kraken/index.html">Kraken</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ioapi/index.html">IOAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../lammps/index.html">LAMMPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../leDock/index.html">leDock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../lePro/index.html">lePro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../links/index.html">LINKS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../lotos_euros/index.html">Lotos Euros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mafft/index.html">MAFFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mdstress-lib/index.html">MDSTRESS-LIB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../MedeA/index.html">MedeA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mothur/index.html">Mothur</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mpich/index.html">MPICH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mrBayes/index.html">mrBayes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../MUSCLE/index.html">MUSCLE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../namd/index.html">NAMD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ncl/index.html">ncl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../NCAR-ncl/index.html">NCAR NCL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../OpenFOAM/index.html">OpenFOAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../openquake/index.html">OpenQuake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../opensees/index.html">OpenSees</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ost/index.html">Openstructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pargenes/index.html">ParGenes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../partitionFinder/index.html">Partition Finder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../phylonet/index.html">PhyloNet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../picrust2/index.html">PICRUSt2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pigz/index.html">Pigz</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plumed/index.html">Plumed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../prank/index.html">Prank</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../prinseq-lite/index.html">Prinseq-lite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pteros/index.html">Pteros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pyrad/index.html">pyrad</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../QE/index.html">QE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../qiime2/index.html">Qiime2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../raxml/index.html">RAxML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../rDock/index.html">rDock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../repet/index.html">REPET</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SAMtools/index.html">SAMtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SMOKE/index.html">SMOKE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sparsehash/index.html">Google Sparsehash</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stacks/index.html">stacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tigmint/index.html">Tigmint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../topHat/index.html">TopHat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../transabyss/index.html">Trans-ABySS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../transrate/index.html">Transrate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../trimmomatic/index.html">trimmomatic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../trinity/index.html">Trinity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../USPEX/index.html">USPEX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../VASP/index.html">VASP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vmd/index.html">VMD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vsearch/index.html">vsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../wps/index.html">Wps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../wrf/index.html">WRF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../makedepf90/index.html">Makedepf90</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Geant4/index.html">GEANT4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ROOT/index.html">ROOT</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../managementsoftware/index.html">Management Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../provisioning/index.html">Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../monitoring/index.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../operatingsystems/index.html">Operating Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scientific_libraries/index.html">Scientific Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../accelerators/index.html">Accelerators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how-to-acknowledge.html">How to Acknowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../report-a-bug.html">Report a Bug</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">apolo-docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Software</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Scientific Applications</a></li>
          <li class="breadcrumb-item"><a href="../index.html">CHARMM</a></li>
      <li class="breadcrumb-item active">CHARMM c41b2</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/software/applications/CHARMM/c41b2/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="charmm-c41b2">
<span id="c41b2"></span><h1><a class="toc-backref" href="#id3" role="doc-backlink">CHARMM c41b2</a><a class="headerlink" href="#charmm-c41b2" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><strong>Installation date:</strong> 5/06/2017</p></li>
<li><p><strong>URL:</strong>  <a class="reference external" href="https://www.charmm.org/charmm">https://www.charmm.org/charmm</a></p></li>
<li><p><strong>Apolo version:</strong> Apolo II</p></li>
<li><p><strong>License:</strong> Payment (Special Contract)</p></li>
</ul>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#charmm-c41b2" id="id3">CHARMM c41b2</a></p>
<ul>
<li><p><a class="reference internal" href="#dependencies" id="id4">Dependencies</a></p>
<ul>
<li><p><a class="reference internal" href="#apolo" id="id5">Apolo</a></p></li>
<li><p><a class="reference internal" href="#cronos" id="id6">Cronos</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#installation" id="id7">Installation</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id8">Apolo</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id9">Cronos</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module" id="id10">Module</a></p></li>
<li><p><a class="reference internal" href="#mode-of-use" id="id11">Mode of Use</a></p></li>
<li><p><a class="reference internal" href="#slurm-template" id="id12">SLURM Template</a></p></li>
<li><p><a class="reference internal" href="#references" id="id13">References</a></p></li>
<li><p><a class="reference internal" href="#author" id="id14">Author</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="dependencies">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Dependencies</a><a class="headerlink" href="#dependencies" title="Link to this heading"></a></h2>
<section id="apolo">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Apolo</a><a class="headerlink" href="#apolo" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>MPICH 3.2 (This must be compiled without using the PMI interface, as there is a bug with SLURM which makes it impossible to run distributed jobs)</p></li>
<li><p>GCC-5.4.0</p></li>
<li><p>Source code GAMESS 2016 R1</p></li>
<li><p>Cmake &gt;= 3.7.1</p></li>
</ul>
</section>
<section id="cronos">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Cronos</a><a class="headerlink" href="#cronos" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Gnu GCC &gt;= 5.5.0</p></li>
<li><p>Mpich2 &gt;= 3.2.1</p></li>
<li><p>FFTW3 &gt;= 3.3.7</p></li>
<li><p>CMake &gt;= 3.10.2</p></li>
<li><p>Source code GAMESS 2016 R1 (gamess-current.tar.gz)</p></li>
</ul>
</section>
</section>
<section id="installation">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Installation</a><a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Apolo</a><a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>After resolving to load the previously mentioned dependencies, you can proceed with the installation of CHARMM-GAMESS.</p>
<ol class="arabic simple">
<li><p>Prepare the environment before compilation:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/apps/charmm/src/charmm-gammess
$<span class="w"> </span>tar<span class="w"> </span>xf<span class="w"> </span>c41b2.tar.gz
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>charmm
$<span class="w"> </span>wget<span class="w"> </span>http://ala.cmm.ki.si/gamess/20160818.1/gamess-20160818.1-charmm.tar.gz
$<span class="w"> </span>tar<span class="w"> </span>xf<span class="w"> </span>gamess-20160818.1-charmm.tar.gz
$<span class="w"> </span>rm<span class="w"> </span>gamess-20160818.1-charmm.tar.gz
$<span class="w"> </span>mkdir<span class="w"> </span>source/gamint/gamess
$<span class="w"> </span>cp<span class="w"> </span>~/apps/gamess/src/gamess/source/*<span class="w"> </span>source/gamint/gamess/
$<span class="w"> </span>rm<span class="w"> </span>source/gamint/gamess/vector.src
$<span class="w"> </span>rm<span class="w"> </span>source/gamint/gamess/ga.src
$<span class="w"> </span>module<span class="w"> </span>unload<span class="w"> </span>slurm/16.05.6
$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>mpich2/3.2_gcc-5.4.0<span class="w"> </span>cmake/3.7.1
$<span class="w"> </span>patch<span class="w"> </span>-p1<span class="w"> </span>&lt;<span class="w"> </span>gamess/gamess2016-for-charmm.patch
$<span class="w"> </span>patch<span class="w"> </span>-p1<span class="w"> </span>&lt;<span class="w"> </span>gamess/c41b2-for-gamess.patch
$<span class="w"> </span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>tool/gmscomp
</pre></div>
</div>
<p>For the moment ignore this step.</p>
<p>We comment on the following line in the <strong>tool/gmscomp</strong> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>emacs<span class="w"> </span>/home/mgomezzul/apps/charmm/src/charmm-gammess/charmm/tool/gmscomp
$<span class="w"> </span>...
$<span class="w"> </span><span class="c1">#set EXTRAOPT=&quot;$EXTRAOPT -w -fno-aggressive-loop-optimizations -fno-sanitize=all&quot;</span>
$<span class="w"> </span>...
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>After preparing the compilation environment we proceed with the compilation:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/charmm/build
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/charmm/build
$<span class="w"> </span>~/apps/charmm/src/charmm-gammess/charmm/configure<span class="w"> </span>--gamess
$<span class="w"> </span>make<span class="w"> </span>-j<span class="w"> </span><span class="m">8</span>
</pre></div>
</div>
<p>3. At the end of the execution of the <strong>make -j 8</strong>, several errors related to functions that are not defined will result,
this happens because the CHARMM and GAMESS compilation methods are different, making cmake unable to produce the dependencies
for the parallel compilation of the program. This is why it is necessary to apply a new patch and recompile again.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/apps/charmm/src/charmm-gammess/charmm
$<span class="w"> </span>patch<span class="w"> </span>-p1<span class="w"> </span>&lt;<span class="w"> </span>gamess/c41b2-phase2.patch
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/charmm/build
$<span class="w"> </span>make<span class="w"> </span>-j<span class="w"> </span><span class="m">8</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>After finishing with the last parallel make, the <strong>charmm</strong> binary should have been produced, we can try it as follows:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./charmm
...
<span class="m">1</span>
<span class="w">                </span>Chemistry<span class="w"> </span>at<span class="w"> </span>HARvard<span class="w"> </span>Macromolecular<span class="w"> </span>Mechanics
<span class="w">        </span><span class="o">(</span>CHARMM<span class="o">)</span><span class="w"> </span>-<span class="w"> </span>Developmental<span class="w"> </span>Version<span class="w"> </span>41b2<span class="w">   </span>February<span class="w"> </span><span class="m">15</span>,<span class="w"> </span><span class="m">2017</span>
<span class="w">                            </span>Revision<span class="w"> </span>unknown
<span class="w">    </span>Copyright<span class="o">(</span>c<span class="o">)</span><span class="w"> </span><span class="m">1984</span>-2014<span class="w">  </span>President<span class="w"> </span>and<span class="w"> </span>Fellows<span class="w"> </span>of<span class="w"> </span>Harvard<span class="w"> </span>College
<span class="w">                            </span>All<span class="w"> </span>Rights<span class="w"> </span>Reserved
<span class="w">  </span>Current<span class="w"> </span>operating<span class="w"> </span>system:<span class="w"> </span>Linux-2.6.32-504.16.2.el6.x86_64<span class="o">(</span>x86_64<span class="o">)</span>@deb
<span class="w">              </span>Created<span class="w"> </span>on<span class="w">  </span><span class="m">6</span>/6/17<span class="w"> </span>at<span class="w">  </span><span class="m">9</span>:36:54<span class="w"> </span>by<span class="w"> </span>user:<span class="w"> </span>mgomezzul

<span class="w">         </span>Maximum<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>ATOMS:<span class="w">    </span><span class="m">360720</span>,<span class="w"> </span>and<span class="w"> </span>RESidues:<span class="w">      </span><span class="m">120240</span>
...
</pre></div>
</div>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Cronos</a><a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>After resolving to load the previously mentioned dependencies, you can proceed with the installation of <strong>CHARMM-GAMESS.</strong></p>
<ol class="arabic simple">
<li><p>Prepare the compilation environment:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/mgomezzul/apps/charmm-gammes/src/gcc-5.5.0_mpich2-3.2.1
$<span class="w"> </span>tar<span class="w"> </span>xf<span class="w"> </span>c41b2.tar.gz
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>charmm
We<span class="w"> </span>download<span class="w"> </span>the<span class="w"> </span>patch<span class="w"> </span>that<span class="w"> </span>allows<span class="w"> </span>you<span class="w"> </span>to<span class="w"> </span>compile<span class="w"> </span>charmm<span class="w"> </span>with<span class="w"> </span>support<span class="w"> </span><span class="k">for</span><span class="w"> </span>gamess
$<span class="w"> </span>wget<span class="w"> </span>http://ala.cmm.ki.si/gamess/20160818.1/gamess-20160818.1-charmm.tar.gz
$<span class="w"> </span>tar<span class="w"> </span>xf<span class="w"> </span>gamess-20160818.1-charmm.tar.gz
$<span class="w"> </span>rm<span class="w"> </span>gamess-20160818.1-charmm.tar.gz
$<span class="w"> </span>mkdir<span class="w"> </span>source/gamint/gamess
$<span class="w"> </span>cp<span class="w">  </span>~/apps/gammess/src/gamess/source/*<span class="w"> </span>source/gamint/gamess/
$<span class="w"> </span>rm<span class="w"> </span>source/gamint/gamess/vector.src
$<span class="w"> </span>rm<span class="w"> </span>source/gamint/gamess/ga.src
$<span class="w"> </span>module<span class="w"> </span>purge
$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>fftw/3.3.7_gcc-5.5.0_mpich2-3.2.1<span class="w"> </span>cmake/3.10.2
$<span class="w"> </span>patch<span class="w"> </span>-p1<span class="w"> </span>&lt;<span class="w"> </span>gamess/gamess2016-for-charmm.patch
$<span class="w"> </span>patch<span class="w"> </span>-p1<span class="w"> </span>&lt;<span class="w"> </span>gamess/c41b2-for-gamess.patch
$<span class="w"> </span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>tool/gmscomp
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>The following line is commented in the <strong>tool/gmscomp</strong> file:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>emacs<span class="w"> </span>/home/mgomezzul/apps/charmm-gammes/src/gcc-5.5.0_mpich2-3.2.1/charmm/tool/gmscomp
$<span class="w"> </span>...
$<span class="w"> </span><span class="c1">#set EXTRAOPT=&quot;$EXTRAOPT -w -fno-aggressive-loop-optimizations -fno-sanitize=all&quot;</span>
$<span class="w"> </span>...
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>After preparing the compilation environment we proceed with it:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/apps/charmm-gammes/build
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/apps/charmm-gammes/build
$<span class="w"> </span><span class="nv">FFTWDIR</span><span class="o">=</span>/share/apps/fftw/3.3.7/gcc-5.5.0_mpich2-3.2.1<span class="w"> </span><span class="nv">FFTW_HOME</span><span class="o">=</span>/share/apps/fftw/3.3.7/gcc-5.5.0_mpich2-3.2.1<span class="w"> </span>~/apps/charmm-gammes/src/gcc-5.5.0_mpich2-3.2.1/charmm/configure<span class="w"> </span>--prefix<span class="o">=</span>/share/apps/charmm/c41b2/gcc-5.5.0_mpich2-3.2.1<span class="w"> </span>--gamess<span class="w"> </span>--with-gcc
$<span class="w"> </span>make<span class="w"> </span>-j<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>make-charmm.log
</pre></div>
</div>
<p>4. At the end of the execution of the <strong>make -j 16</strong>, several errors related to functions that are not defined will result, this happens because the CHARMM and GAMESS
compilation methods are different, making cmake unable to produce the dependencies for the parallel compilation of the program. This is why it is necessary to apply
a new patch and recompile again.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/<span class="nv">$USER</span>/apps/charmm-gammes/src/gcc-5.5.0_mpich2-3.2.1
$<span class="w"> </span>patch<span class="w"> </span>-p1<span class="w"> </span>&lt;<span class="w"> </span>gamess/c41b2-phase2.patch
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/<span class="nv">$USER</span>/apps/charmm-gammes/build
$<span class="w"> </span>make<span class="w"> </span>-j<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>make-charmm.log
$<span class="w"> </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/share/apps/charmm/c41b2/gcc-5.5.0_mpich2-3.2.1
$<span class="w"> </span>sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span><span class="nv">$USER</span>.apolo<span class="w"> </span>/share/apps/charmm/c41b2/gcc-5.5.0_mpich2-3.2.1
$<span class="w"> </span>sudo<span class="w"> </span>make<span class="w"> </span>install<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>make-charmm.log
$<span class="w"> </span>sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>root.root<span class="w"> </span>/share/apps/charmm/c41b2/gcc-5.5.0_mpich2-3.2.1
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>After finishing with the last parallel make, the charmm binary should have been produced, we can try it as follows:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./charmm
...
<span class="m">1</span>
<span class="w">              </span>Chemistry<span class="w"> </span>at<span class="w"> </span>HARvard<span class="w"> </span>Macromolecular<span class="w"> </span>Mechanics
<span class="w">        </span><span class="o">(</span>CHARMM<span class="o">)</span><span class="w"> </span>-<span class="w"> </span>Developmental<span class="w"> </span>Version<span class="w"> </span>41b2<span class="w">   </span>February<span class="w"> </span><span class="m">15</span>,<span class="w"> </span><span class="m">2017</span>
<span class="w">                             </span>Revision<span class="w"> </span>unknown
<span class="w">    </span>Copyright<span class="o">(</span>c<span class="o">)</span><span class="w"> </span><span class="m">1984</span>-2014<span class="w">  </span>President<span class="w"> </span>and<span class="w"> </span>Fellows<span class="w"> </span>of<span class="w"> </span>Harvard<span class="w"> </span>College
<span class="w">                           </span>All<span class="w"> </span>Rights<span class="w"> </span>Reserved
<span class="w">  </span>Current<span class="w"> </span>operating<span class="w"> </span>system:<span class="w"> </span>Linux-2.6.32-504.16.2.el6.x86_64<span class="o">(</span>x86_64<span class="o">)</span>@deb
<span class="w">              </span>Created<span class="w"> </span>on<span class="w">  </span><span class="m">6</span>/6/17<span class="w"> </span>at<span class="w">  </span><span class="m">9</span>:36:54<span class="w"> </span>by<span class="w"> </span>user:<span class="w"> </span>mgomezzul

<span class="w">         </span>aximum<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>ATOMS:<span class="w">    </span><span class="m">360720</span>,<span class="w"> </span>and<span class="w"> </span>RESidues:<span class="w">      </span><span class="m">120240</span>
...
</pre></div>
</div>
</section>
</section>
<section id="module">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Module</a><a class="headerlink" href="#module" title="Link to this heading"></a></h2>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="c">#%Module1.0####################################################################</span>
<span class="c">##</span>
<span class="c">## module load charmm/c41b2</span>
<span class="c">##</span>
<span class="c">## /share/apps/modules/charmm/c41b2</span>
<span class="c">## Written by Mateo Gomez-Zuluaga</span>
<span class="c">##</span>

<span class="k">proc</span><span class="w"> </span>ModulesHelp<span class="w"> </span><span class="k">{}</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="k">global</span><span class="w"> </span>version<span class="w"> </span>modroot
<span class="w">    </span><span class="nb">puts</span><span class="w"> </span>stderr<span class="w"> </span><span class="s2">&quot;Sets the environment for using CHARMM c41b2\</span>
<span class="s2">        \nin the shared directory\</span>
<span class="s2">        \n/share/apps/charmm/c41b2\</span>
<span class="s2">        \nbuilded with GAMESS 2016 R1, MPICH2 3.2 and GCC-5.4.0&quot;</span>
<span class="k">}</span>

<span class="nv">module-whatis</span><span class="w"> </span><span class="s2">&quot;(Name________) charmm&quot;</span>
<span class="nv">module-whatis</span><span class="w"> </span><span class="s2">&quot;(Version_____) c41b2&quot;</span>
<span class="nv">module-whatis</span><span class="w"> </span><span class="s2">&quot;(Compilers___) mpich2-3.2_gcc-5.4.0&quot;</span>
<span class="nv">module-whatis</span><span class="w"> </span><span class="s2">&quot;(System______) x86_64-redhat-linux&quot;</span>
<span class="nv">module-whatis</span><span class="w"> </span><span class="s2">&quot;(Libraries___) &quot;</span>

<span class="c"># for Tcl script use only</span>
<span class="k">set</span><span class="w">         </span>topdir<span class="w">        </span><span class="o">/</span>share<span class="o">/</span>apps<span class="o">/</span>charmm<span class="o">/</span>c41b2
<span class="k">set</span><span class="w">         </span>version<span class="w">       </span>c41b2
<span class="k">set</span><span class="w">         </span>sys<span class="w">           </span>x86_64-redhat-linux

<span class="nv">conflict</span><span class="w"> </span>charmm

<span class="nv">module</span><span class="w"> </span>load<span class="w"> </span>mpich2<span class="o">/</span><span class="mf">3.2</span>_gcc-5.4.0


<span class="nv">prepend-path</span><span class="w">        </span>PATH<span class="w">            </span><span class="nv">$topdir</span><span class="o">/</span>bin
</pre></div>
</div>
</section>
<section id="mode-of-use">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Mode of Use</a><a class="headerlink" href="#mode-of-use" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Have available an example to run charmm-gamess, in our case the example is available in <strong>/home/$USER/test/charm/ilans</strong></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/<span class="nv">$USER</span>/test/charmm-gamess/test_ilans
</pre></div>
</div>
</section>
<section id="slurm-template">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">SLURM Template</a><a class="headerlink" href="#slurm-template" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="c1">#!/bin/sh</span>

<span class="c1">#SBATCH --partition=longjobs</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --ntasks-per-node=16</span>
<span class="c1">#SBATCH --time=250:00:00</span>
<span class="c1">#SBATCH --job-name=mdrun-npt</span>
<span class="c1">#SBATCH -o result_%N_%j.out</span>
<span class="c1">#SBATCH -e result_%N_%j.err</span>

<span class="c1"># Don&#39;t share environment variables</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SBATCH_EXPORT</span><span class="o">=</span>NONE
<span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>

module<span class="w"> </span>load<span class="w"> </span>charmm/c41b2_gcc-5.5.0_mpich2-3.2.1

srun<span class="w"> </span>--mpi<span class="o">=</span>pmi2<span class="w"> </span>charmm<span class="w"> </span>&lt;<span class="w"> </span>min1.inp<span class="w">  </span>&gt;<span class="w"> </span>pot.out
</pre></div>
</div>
</section>
<section id="references">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">References</a><a class="headerlink" href="#references" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://www.charmm.org/charmm/documentation/by-version/c41b1/">https://www.charmm.org/charmm/documentation/by-version/c41b1/</a></p></li>
<li><p><a class="reference external" href="http://ala.cmm.ki.si/gamess/20160818.1/Compile-CHARMM-with-GAMESS.txt">http://ala.cmm.ki.si/gamess/20160818.1/Compile-CHARMM-with-GAMESS.txt</a></p></li>
<li><p><a class="reference external" href="https://www.charmmtutorial.org/index.php/Installation">https://www.charmmtutorial.org/index.php/Installation</a></p></li>
<li><p><a class="reference external" href="https://github.com/kgullikson88/Telluric-Fitter/issues/5">https://github.com/kgullikson88/Telluric-Fitter/issues/5</a></p></li>
</ul>
</section>
<section id="author">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Author</a><a class="headerlink" href="#author" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Mateo Gómez Zuluaga</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="CHARMM" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../Calculix/index.html" class="btn btn-neutral float-right" title="Calculix" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Creative Commons Attribution-NonCommercial 4.0 International License.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>